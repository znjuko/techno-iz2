        -:    0:Source:/home/paccbet/techno/technopark-cpp/techno-iz2/src/file/file.c
        -:    0:Graph:../build/src/file/CMakeFiles/file.dir/file.c.gcno
        -:    0:Data:../build/src/file/CMakeFiles/file.dir/file.c.gcda
        -:    0:Runs:6
        -:    1://
        -:    2:// Created by Черных Никита Алекандрович on 3/25/21.
        -:    3://
        -:    4:
        -:    5:#include "file.h"
        -:    6:
       23:    7:File* create_file_reader(const char* filename, const char* open_params)
        -:    8:{
       23:    9:    FILE* file_iterator = fopen(filename, open_params);
       23:   10:    if (!file_iterator) {
        9:   11:        return NULL;
        -:   12:    }
        -:   13:
       14:   14:    File* file_reader = (File*)calloc(1, sizeof(File));
       14:   15:    if (!file_reader) {
    #####:   16:        return NULL;
        -:   17:    }
        -:   18:
       14:   19:    file_reader->file_iterator = file_iterator;
       14:   20:    return file_reader;
        -:   21:};
        -:   22:
       17:   23:void destroy_file_reader(File** file)
        -:   24:{
       17:   25:    if (!*file) {
        6:   26:        return;
        -:   27:    }
        -:   28:
       11:   29:    if ((*file)->file_iterator != NULL) {
       11:   30:        fclose((*file)->file_iterator);
        -:   31:    }
        -:   32:
       11:   33:    free(*file);
       11:   34:    *file = NULL;
        -:   35:}
        -:   36:
       36:   37:double read_number(File* file_reader)
        -:   38:{
       36:   39:    if (!file_reader) {
        3:   40:        return 0;
        -:   41:    }
        -:   42:
       33:   43:    double value = 0;
       33:   44:    int res = 0;
        -:   45:    do {
       33:   46:        res = fscanf(file_reader->file_iterator, "%lf", &value);
        -:   47:
       33:   48:    } while (res != 1);
        -:   49:
       33:   50:    return value;
        -:   51:};
